<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polynomial & Linear Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the graph container and inputs */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fc;
            min-height: 100vh;
        }
        #graphCanvas {
            border: 1px solid #e0e0e0;
            background-color: #ffffff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-radius: 0.75rem; /* rounded-xl */
        }
        .tab-button {
            padding: 1rem 1.5rem;
            font-weight: 600;
            border-radius: 0.5rem 0.5rem 0 0;
            cursor: pointer;
            transition: all 0.2s;
        }
        .tab-content {
            padding-top: 1.5rem;
        }
        /* Style for step-by-step output */
        .step {
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            border-left: 3px solid #6366f1;
        }
        .step-title {
            font-weight: 600;
            color: #4338ca;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#3b82f6',
                        'primary-dark': '#1e293b',
                    }
                }
            }
        }
    </script>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto bg-white p-6 md:p-10 rounded-3xl shadow-2xl">
        
        <div class="mb-8 border-b border-gray-200 flex space-x-2 overflow-x-auto">
            <button id="polyTabButton"
                    onclick="switchTab('polynomialTab')"
                    class="tab-button bg-primary-blue text-white shadow-lg whitespace-nowrap">
                Polynomial Analyzer
            </button>
            <button id="linearTabButton"
                    onclick="switchTab('linearTab')"
                    class="tab-button bg-gray-100 text-gray-500 hover:bg-gray-200 whitespace-nowrap">
                Linear Equations Analyzer
            </button>
            <button id="quadraticTabButton"
                    onclick="switchTab('quadraticTab')"
                    class="tab-button bg-gray-100 text-gray-500 hover:bg-gray-200 whitespace-nowrap">
                Quadratic Equation Analyzer
            </button>
            <button id="rootsTabButton"
                    onclick="switchTab('rootsTab')"
                    class="tab-button bg-gray-100 text-gray-500 hover:bg-gray-200 whitespace-nowrap">
                Roots of Equation
            </button>
            <button id="algebraicMethodsTabButton"
                    onclick="switchTab('algebraicMethodsTab')"
                    class="tab-button bg-gray-100 text-gray-500 hover:bg-gray-200 whitespace-nowrap">
                Algebraic Methods Solver
            </button>
        </div>

        <div id="polynomialTab" class="tab-content">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2 text-center">Polynomial Project Analyzer</h1>
            <p class="text-center text-gray-500 mb-8">Explore the properties of any polynomial $P(x)$.</p>

            <div class="bg-gray-50 p-6 rounded-2xl shadow-inner mb-8">
                <label for="polynomialInput" class="block text-lg font-medium text-gray-700 mb-3">
                    Enter your Polynomial $P(x)$:
                </label>
                <input type="text" id="polynomialInput"
                       value="x^2 - 4x + 3"
                       placeholder="e.g., 2x^3 - 5x + 1"
                       class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out text-lg">
                <button onclick="analyzePolynomial()"
                        class="mt-4 w-full md:w-auto px-6 py-3 bg-primary-blue text-white font-semibold rounded-xl hover:bg-blue-600 transition duration-300 ease-in-out shadow-lg transform hover:scale-[1.01]">
                    Analyze Polynomial
                </button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

                <div class="lg:col-span-2 space-y-8">
                    <h2 class="text-2xl font-bold text-primary-dark mb-4 border-b pb-2">Analysis Results</h2>

                    <div id="resultsDisplay" class="space-y-6">
                        <div class="bg-indigo-50 p-5 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-indigo-800 mb-3">1. Degree and Evaluation</h3>
                            <p id="degreeResult" class="text-gray-700 text-lg mb-4"></p>

                            <div class="flex items-center space-x-3">
                                <label for="xValueInput" class="text-gray-600">Find $P(x)$ at $x=$</label>
                                <input type="number" id="xValueInput" value="2"
                                       class="w-20 px-3 py-1 border border-gray-300 rounded-lg text-base" onchange="updateEvaluation()">
                            </div>
                            <p id="evaluationResult" class="text-green-700 font-medium mt-2"></p>
                        </div>

                        <div class="bg-red-50 p-5 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-red-800 mb-3">2. Zeros of the Polynomial</h3>
                            <p id="zerosResult" class="text-gray-700 text-lg mb-4"></p>
                            <p id="discriminantResult" class="text-gray-700 text-base italic"></p>
                        </div>

                        <div class="bg-yellow-50 p-5 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-yellow-800 mb-3">3. Geometrical Meaning of Zeros</h3>
                            <p id="geometricMeaning" class="text-gray-700 text-lg">
                                The zeros of the polynomial $P(x)$ are the $x$-coordinates of the points where the graph of $y = P(x)$ intersects the $x$-axis.
                                On the graph above, these are the points where the curve crosses the horizontal axis ($y=0$).
                            </p>
                        </div>

                        <div class="bg-teal-50 p-5 rounded-xl shadow-md">
                            <h3 class="text-xl font-semibold text-teal-800 mb-3">4. Zeros and Coefficients Relationship (Vieta's Formulas)</h3>
                            <p id="relationshipResult" class="text-gray-700 text-lg"></p>
                            <div id="relationshipDetails" class="mt-3 text-sm italic text-teal-700"></div>
                            <p id="factorizationExplanation" class="mt-3 font-medium text-teal-800"></p>
                        </div>
                    </div>

                    <div class="bg-blue-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-blue-800 mb-3">5. $X$ and $Y$ Values Table</h3>
                        <p class="text-gray-700 mb-3">A sample of $P(x)$ values for plotting and observation (from $x=-5$ to $x=5$):</p>
                        <div id="valueTableContainer" class="max-h-60 overflow-y-auto rounded-lg shadow-inner">
                            </div>
                    </div>

                    <div class="bg-green-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-green-800 mb-3">6. Geometrical Properties</h3>
                        <p id="consistencyResult" class="text-gray-700 text-lg mb-2"></p>
                        <p id="graphDependencyResult" class="text-gray-700 text-lg mb-2"></p>
                        <p id="graphTypeResult" class="text-gray-700 text-lg mb-2"></p>
                        <p id="yInterceptResult" class="text-gray-700 text-lg mb-2"></p>
                        <p id="lineOfSymmetryResult" class="text-gray-700 text-lg mb-2"></p>
                        <p id="graphIntersectionResult" class="text-gray-700 text-lg"></p>
                    </div>
                    
                    <div class="bg-purple-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">7. Form Quadratic Equation from Zeros</h3>
                        <p class="text-gray-700 mb-4">If $\alpha$ and $\beta$ are the zeros, the equation is $x^2 - (\alpha + \beta)x + (\alpha \cdot \beta) = 0$.</p>

                        <div class="grid grid-cols-2 gap-4 items-center">
                            <label class="text-gray-600 text-right">Sum of Zeros ($\alpha + \beta$):</label>
                            <input type="number" id="sumInput" value="4" class="px-3 py-1 border border-gray-300 rounded-lg text-base">

                            <label class="text-gray-600 text-right">Product of Zeros ($\alpha \cdot \beta$):</label>
                            <input type="number" id="productInput" value="3" class="px-3 py-1 border border-gray-300 rounded-lg text-base">
                        </div>
                        
                        <button onclick="formQuadraticEquation()" class="mt-4 w-full px-4 py-2 bg-purple-600 text-white font-semibold rounded-xl hover:bg-purple-700 transition duration-300 shadow-md">
                            Generate Equation
                        </button>

                        <p id="formedEquationResult" class="text-purple-800 font-bold mt-4 text-center text-xl"></p>
                    </div>

                </div>

                <div class="lg:col-span-1 flex flex-col items-center">
                    <h2 class="text-2xl font-bold text-primary-dark mb-4 border-b pb-2 w-full">Graphical Representation</h2>
                    <canvas id="graphCanvas" width="400" height="400" class="w-full h-auto max-h-[400px]"></canvas>
                </div>

            </div>
        </div>
        
        <div id="linearTab" class="tab-content hidden">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2 text-center">Linear Equations Analyzer</h1>
            <p class="text-center text-gray-500 mb-8">Solve single linear equations or systems of two linear equations.</p>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">

                <div class="bg-gray-50 p-6 rounded-2xl shadow-inner">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4 border-b pb-2">1. Single Linear Equation ($ax + b = 0$)</h2>
                    <p class="text-gray-700 mb-4">Find the root $x$ for the equation $ax + b = 0$.</p>

                    <div class="space-y-4 mb-4">
                        <label class="block text-gray-700">Coefficient $a$:</label>
                        <input type="number" id="a1Input" value="2" class="w-full px-4 py-2 border border-gray-300 rounded-xl">
                        
                        <label class="block text-gray-700">Constant $b$:</label>
                        <input type="number" id="b1Input" value="-10" class="w-full px-4 py-2 border border-gray-300 rounded-xl">
                    </div>

                    <button onclick="solveSingleLinearEquation()"
                            class="mt-4 w-full px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition duration-300 ease-in-out shadow-lg">
                        Solve $ax + b = 0$
                    </button>

                    <div class="bg-indigo-100 p-4 rounded-xl mt-4">
                        <h3 class="text-xl font-semibold text-indigo-800 mb-2">Solution</h3>
                        <p id="singleLinearResult" class="text-indigo-700 font-bold text-lg"></p>
                    </div>
                </div>

                <div class="bg-gray-50 p-6 rounded-2xl shadow-inner">
                    <h2 class="text-2xl font-bold text-red-800 mb-4 border-b pb-2">2. Simultaneous Equations (Pair of Linear Equations)</h2>
                    <p class="text-gray-700 mb-4">Solve for $x$ and $y$ in the system:
                        <br>$$a_1x + b_1y = c_1$$
                        $$a_2x + b_2y = c_2$$
                    </p>

                    <div class="space-y-4 mb-4">
                        <h4 class="font-medium text-gray-600">Equation 1 ($a_1, b_1, c_1$):</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <input type="number" id="a1SimInput" value="2" placeholder="a1" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="b1SimInput" value="1" placeholder="b1" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="c1SimInput" value="5" placeholder="c1" class="px-3 py-2 border rounded-lg">
                        </div>
                        
                        <h4 class="font-medium text-gray-600">Equation 2 ($a_2, b_2, c_2$):</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <input type="number" id="a2SimInput" value="1" placeholder="a2" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="b2SimInput" value="-3" placeholder="b2" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="c2SimInput" value="-1" placeholder="c2" class="px-3 py-2 border rounded-lg">
                        </div>
                    </div>

                    <button onclick="solveSimultaneousEquations()"
                            class="mt-4 w-full px-6 py-3 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 transition duration-300 ease-in-out shadow-lg">
                        Solve System
                    </button>

                    <div class="bg-red-100 p-4 rounded-xl mt-4">
                        <h3 class="text-xl font-semibold text-red-800 mb-2">Solution</h3>
                        <p id="simultaneousLinearResult" class="text-red-700 font-bold text-lg"></p>
                    </div>
                </div>
            </div>
        </div>
        <div id="quadraticTab" class="tab-content hidden">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2 text-center">Quadratic Equation Analyzer</h1>
            <p class="text-center text-gray-500 mb-8">Solve quadratic equations using the discriminant and the quadratic formula.</p>

            <div class="max-w-xl mx-auto bg-gray-50 p-6 rounded-2xl shadow-inner">
                <h2 class="text-2xl font-bold text-teal-800 mb-4 border-b pb-2">Solve $ax^2 + bx + c = 0$</h2>
                <p class="text-gray-700 mb-4">Enter the coefficients $a, b,$ and $c$ to find the roots.</p>

                <div class="grid grid-cols-3 gap-4 mb-6">
                    <div>
                        <label for="a2Input" class="block text-gray-700 font-medium">Coefficient $a$:</label>
                        <input type="number" id="a2Input" value="1" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="b2Input" class="block text-gray-700 font-medium">Coefficient $b$:</label>
                        <input type="number" id="b2Input" value="-4" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                    <div>
                        <label for="c2Input" class="block text-gray-700 font-medium">Constant $c$:</label>
                        <input type="number" id="c2Input" value="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                    </div>
                </div>

                <button onclick="solveQuadraticEquation()"
                        class="mt-4 w-full px-6 py-3 bg-teal-600 text-white font-semibold rounded-xl hover:bg-teal-700 transition duration-300 ease-in-out shadow-lg">
                    Find Roots (Quadratic Formula)
                </button>

                <div class="bg-teal-100 p-4 rounded-xl mt-6">
                    <h3 class="text-xl font-semibold text-teal-800 mb-2">Step-by-Step Solution</h3>
                    <div id="quadraticSolutionResult" class="text-teal-700 font-normal text-base space-y-2">
                        <p>Enter coefficients and click "Find Roots" to see the solution.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="rootsTab" class="tab-content hidden">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2 text-center">Roots of Equation Analyzer</h1>
            <p class="text-center text-gray-500 mb-8">Analyze roots (zeros) of a polynomial $P(x) = 0$, including **linear, quadratic, and cubic** forms.</p>

            <div class="max-w-3xl mx-auto">
                <div class="bg-gray-50 p-6 rounded-2xl shadow-inner mb-8">
                    <label for="rootsInput" class="block text-lg font-medium text-gray-700 mb-3">
                        Enter your Polynomial $P(x)$:
                    </label>
                    <input type="text" id="rootsInput"
                           value="x^2 - 4x + 3"
                           placeholder="e.g., 2x^3 - 5x + 1"
                           class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-primary-blue focus:border-primary-blue transition duration-150 ease-in-out text-lg">
                    <button onclick="analyzeAllRoots()"
                            class="mt-4 w-full md:w-auto px-6 py-3 bg-green-600 text-white font-semibold rounded-xl hover:bg-green-700 transition duration-300 ease-in-out shadow-lg transform hover:scale-[1.01]">
                        Analyze Roots
                    </button>
                </div>

                <div class="space-y-6">
                    <div class="bg-blue-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-blue-800 mb-3">1. Roots, Distinct Count, and Nature</h3>
                        <p id="rootsResultAll" class="text-gray-700 text-lg mb-2">Enter a polynomial to analyze its roots.</p>
                        <p id="rootsNatureResult" class="text-blue-700 font-medium"></p>
                    </div>

                    <div class="bg-yellow-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-yellow-800 mb-3">2. Discriminant and $k$ Value Analysis (Quadratic only)</h3>
                        <p id="discriminantAnalysisResult" class="text-gray-700 text-lg mb-4">Discriminant ($\Delta = b^2 - 4ac$) analysis for $ax^2+bx+c=0$.</p>
                        
                        <h4 class="font-bold text-yellow-800 mt-4 mb-2">Determine the position value of $k$ for equal roots ($\Delta = 0$)</h4>
                        <div class="text-sm italic text-gray-600 mb-2">This feature uses the $a, b, c$ values from the **Quadratic Equation Analyzer** tab as a template for $ax^2+bx+c=0$.</div>
                        
                        <div class="flex items-center space-x-4">
                            <button onclick="calculateKForEqualRoots('a')" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">Solve for $k$ (as $a$)</button>
                            <button onclick="calculateKForEqualRoots('b')" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">Solve for $k$ (as $b$)</button>
                            <button onclick="calculateKForEqualRoots('c')" class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700">Solve for $k$ (as $c$)</button>
                        </div>
                        <p id="kValueResult" class="text-yellow-800 font-bold mt-4 text-center text-xl"></p>
                    </div>
                    
                    <div class="bg-purple-50 p-5 rounded-xl shadow-md">
                        <h3 class="text-xl font-semibold text-purple-800 mb-3">3. Find the Equation When its Roots are Given</h3>
                        <p class="text-gray-700 mb-4">Form a quadratic equation $x^2 - (\alpha + \beta)x + (\alpha \cdot \beta) = 0$ given the sum and product of its roots $\alpha, \beta$.</p>

                        <div class="grid grid-cols-2 gap-4 items-center">
                            <label class="text-gray-600 text-right">Sum of Roots ($\alpha + \beta$):</label>
                            <input type="number" id="sumInputRoots" value="4" class="px-3 py-1 border border-gray-300 rounded-lg text-base">

                            <label class="text-gray-600 text-right">Product of Roots ($\alpha \cdot \beta$):</label>
                            <input type="number" id="productInputRoots" value="3" class="px-3 py-1 border border-gray-300 rounded-lg text-base">
                        </div>
                        
                        <button onclick="formQuadraticEquationRoots()" class="mt-4 w-full px-4 py-2 bg-purple-600 text-white font-semibold rounded-xl hover:bg-purple-700 transition duration-300 shadow-md">
                            Generate Equation
                        </button>

                        <p id="formedEquationResultRoots" class="text-purple-800 font-bold mt-4 text-center text-xl"></p>
                    </div>
                </div>
            </div>
        </div>

        <div id="algebraicMethodsTab" class="tab-content hidden">
            <h1 class="text-4xl font-extrabold text-primary-dark mb-2 text-center">Simultaneous Equations: Algebraic Methods</h1>
            <p class="text-center text-gray-500 mb-8">Solve a pair of linear equations using Substitution, Elimination, and Cross-Multiplication methods.</p>

            <div class="max-w-4xl mx-auto space-y-8">
                <div class="bg-gray-50 p-6 rounded-2xl shadow-inner mb-8">
                    <h2 class="text-2xl font-bold text-primary-dark mb-4 border-b pb-2">Enter Equations ($a_ix + b_iy = c_i$)</h2>
                    <div class="text-gray-700 mb-4 font-mono">
                        Equation 1: $a_1x + b_1y = c_1$ <br>
                        Equation 2: $a_2x + b_2y = c_2$
                    </div>
                    <div class="space-y-4 mb-4">
                        <h4 class="font-medium text-gray-600">Equation 1 ($a_1, b_1, c_1$):</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <input type="number" id="a1AlgInput" value="2" placeholder="a1" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="b1AlgInput" value="1" placeholder="b1" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="c1AlgInput" value="5" placeholder="c1" class="px-3 py-2 border rounded-lg">
                        </div>
                        
                        <h4 class="font-medium text-gray-600">Equation 2 ($a_2, b_2, c_2$):</h4>
                        <div class="grid grid-cols-3 gap-2">
                            <input type="number" id="a2AlgInput" value="1" placeholder="a2" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="b2AlgInput" value="-3" placeholder="b2" class="px-3 py-2 border rounded-lg">
                            <input type="number" id="c2AlgInput" value="-1" placeholder="c2" class="px-3 py-2 border rounded-lg">
                        </div>
                    </div>

                    <button onclick="runAllAlgebraicMethods()"
                            class="mt-4 w-full px-6 py-3 bg-primary-blue text-white font-semibold rounded-xl hover:bg-blue-600 transition duration-300 shadow-lg">
                        Solve & Analyze
                    </button>
                </div>

                <div id="analysisSection" class="bg-purple-50 p-6 rounded-2xl shadow-md">
                    <h2 class="text-2xl font-bold text-purple-800 mb-4 border-b pb-2">Method Comparison & Final Solution</h2>
                    <div id="finalSolutionResult" class="text-purple-700 font-bold text-2xl mb-6 text-center">Enter coefficients and click "Solve & Analyze".</div>
                    <div id="methodAnalysisResult" class="text-gray-700">
                        <h3 class="font-semibold text-xl text-purple-800 mt-2">Which Method is Easiest? (Analysis)</h3>
                        <p class="mt-2 space-y-2">
                            The **Elimination Method** is often considered the easiest and most practical, especially when coefficients are simple integers, as it's direct and avoids fractional arithmetic early on.
                            The **Substitution Method** is easiest when one variable already has a coefficient of 1 or -1, making it simple to isolate.
                            The **Cross-Multiplication Method** is a formulaic shortcut and is the fastest *if* the formula is memorized perfectly, but it is the most prone to sign errors if the formula is forgotten or misapplied.
                        </p>
                    </div>
                </div>

                <div class="bg-indigo-50 p-6 rounded-2xl shadow-md">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4 border-b pb-2">1. Substitution Method (Step-by-Step)</h2>
                    <div id="substitutionSolution" class="text-gray-700 font-normal text-base space-y-2">
                        Click "Solve & Analyze" to see the solution steps.
                    </div>
                </div>

                <div class="bg-red-50 p-6 rounded-2xl shadow-md">
                    <h2 class="text-2xl font-bold text-red-800 mb-4 border-b pb-2">2. Elimination Method (Step-by-Step)</h2>
                    <div id="eliminationSolution" class="text-gray-700 font-normal text-base space-y-2">
                        Click "Solve & Analyze" to see the solution steps.
                    </div>
                </div>

                <div class="bg-teal-50 p-6 rounded-2xl shadow-md">
                    <h2 class="text-2xl font-bold text-teal-800 mb-4 border-b pb-2">3. Cross-Multiplication Method (Step-by-Step)</h2>
                    <div id="crossMultiplicationSolution" class="text-gray-700 font-normal text-base space-y-2">
                        Click "Solve & Analyze" to see the solution steps.
                    </div>
                </div>
            </div>
        </div>

        <div id="messageBox" class="mt-8 p-4 bg-red-100 text-red-700 rounded-xl hidden"></div>
    </div>

    <script>
        // --- DOM References ---
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        const inputElement = document.getElementById('polynomialInput');
        const xValueInput = document.getElementById('xValueInput');
        const degreeResult = document.getElementById('degreeResult');
        const evaluationResult = document.getElementById('evaluationResult');
        const zerosResult = document.getElementById('zerosResult');
        const discriminantResult = document.getElementById('discriminantResult');
        const relationshipResult = document.getElementById('relationshipResult');
        const relationshipDetails = document.getElementById('relationshipDetails');
        const factorizationExplanation = document.getElementById('factorizationExplanation');
        const messageBox = document.getElementById('messageBox');
        
        // Geometrical Properties (Section 6)
        const consistencyResult = document.getElementById('consistencyResult');
        const graphDependencyResult = document.getElementById('graphDependencyResult');
        const graphTypeResult = document.getElementById('graphTypeResult');
        const yInterceptResult = document.getElementById('yInterceptResult');
        const lineOfSymmetryResult = document.getElementById('lineOfSymmetryResult');
        const graphIntersectionResult = document.getElementById('graphIntersectionResult');

        // Original references (Sections 5 & 7)
        const valueTableContainer = document.getElementById('valueTableContainer');
        const sumInput = document.getElementById('sumInput');
        const productInput = document.getElementById('productInput');
        const formedEquationResult = document.getElementById('formedEquationResult');

        // References for Tab Switching
        const polynomialTabButton = document.getElementById('polyTabButton');
        const linearTabButton = document.getElementById('linearTabButton');
        const quadraticTabButton = document.getElementById('quadraticTabButton');
        const rootsTabButton = document.getElementById('rootsTabButton'); // NEW
        const algebraicMethodsTabButton = document.getElementById('algebraicMethodsTabButton'); // NEW

        const polynomialTab = document.getElementById('polynomialTab');
        const linearTab = document.getElementById('linearTab');
        const quadraticTab = document.getElementById('quadraticTab');
        const rootsTab = document.getElementById('rootsTab'); // NEW
        const algebraicMethodsTab = document.getElementById('algebraicMethodsTab'); // NEW

        // Linear Equation references
        const a1Input = document.getElementById('a1Input');
        const b1Input = document.getElementById('b1Input');
        const singleLinearResult = document.getElementById('singleLinearResult');
        const a1SimInput = document.getElementById('a1SimInput');
        const b1SimInput = document.getElementById('b1SimInput');
        const c1SimInput = document.getElementById('c1SimInput');
        const a2SimInput = document.getElementById('a2SimInput');
        const b2SimInput = document.getElementById('b2SimInput');
        const c2SimInput = document.getElementById('c2SimInput');
        const simultaneousLinearResult = document.getElementById('simultaneousLinearResult');

        // Quadratic Equation references
        const a2Input = document.getElementById('a2Input');
        const b2Input = document.getElementById('b2Input');
        const c2Input = document.getElementById('c2Input');
        const quadraticSolutionResult = document.getElementById('quadraticSolutionResult');
        
        // NEW Roots Tab references
        const rootsInput = document.getElementById('rootsInput');
        const rootsResultAll = document.getElementById('rootsResultAll');
        const rootsNatureResult = document.getElementById('rootsNatureResult');
        const discriminantAnalysisResult = document.getElementById('discriminantAnalysisResult');
        const sumInputRoots = document.getElementById('sumInputRoots');
        const productInputRoots = document.getElementById('productInputRoots');
        const formedEquationResultRoots = document.getElementById('formedEquationResultRoots');
        const kValueResult = document.getElementById('kValueResult');

        // NEW Algebraic Methods Tab references
        const a1AlgInput = document.getElementById('a1AlgInput');
        const b1AlgInput = document.getElementById('b1AlgInput');
        const c1AlgInput = document.getElementById('c1AlgInput');
        const a2AlgInput = document.getElementById('a2AlgInput');
        const b2AlgInput = document.getElementById('b2AlgInput');
        const c2AlgInput = document.getElementById('c2AlgInput');
        const finalSolutionResult = document.getElementById('finalSolutionResult');
        const substitutionSolution = document.getElementById('substitutionSolution');
        const eliminationSolution = document.getElementById('eliminationSolution');
        const crossMultiplicationSolution = document.getElementById('crossMultiplicationSolution');


        let currentCoefficients = null;
        let currentZeros = null;

        // Utility to display a temporary message instead of alert()
        function showMessage(msg, type = 'error') {
            messageBox.textContent = msg;
            messageBox.className = `mt-8 p-4 rounded-xl ${type === 'error' ? 'bg-red-100 text-red-700' : 'bg-blue-100 text-blue-700'}`;
            messageBox.style.display = 'block';
            setTimeout(() => {
                messageBox.style.display = 'none';
            }, 5000);
        }

        // Helper to format equation string
        function formatEq(a, b, c) {
            let eq = '';
            // x term
            if (a === 1) eq += 'x';
            else if (a === -1) eq += '-x';
            else if (a !== 0) eq += `${a}x`;
            // y term
            if (b !== 0) {
                let sign = b > 0 ? '+' : '';
                if (b === 1) eq += (eq ? ` ${sign} y` : 'y');
                else if (b === -1) eq += (eq ? ' - y' : '-y');
                else eq += (eq ? ` ${sign} ${b}y` : `${b}y`);
                if (eq.startsWith('+')) eq = eq.substring(1).trim();
            }
            if (!eq) eq = '0';
            return `${eq} = ${c}`;
        }

        // --- Core Simultaneous Equation Solver ---
        function solveSystem(a1, b1, c1, a2, b2, c2) {
            const D = a1 * b2 - a2 * b1;
            const Dx = c1 * b2 - c2 * b1;
            const Dy = a1 * c2 - a2 * c1;

            if (D === 0) {
                if (Dx === 0 && Dy === 0) {
                    return { status: 'INF', message: 'Infinitely many solutions (Coincident Lines).' };
                } else {
                    return { status: 'NONE', message: 'No solution (Parallel Lines).' };
                }
            } else {
                const x = Dx / D;
                const y = Dy / D;
                return { status: 'UNIQUE', x: x, y: y, D: D, Dx: Dx, Dy: Dy };
            }
        }


        // --- NEW Algebraic Methods Functions ---

        /**
         * Runs all three algebraic methods and the analysis.
         */
        function runAllAlgebraicMethods() {
            const a1 = parseFloat(a1AlgInput.value);
            const b1 = parseFloat(b1AlgInput.value);
            const c1 = parseFloat(c1AlgInput.value);
            const a2 = parseFloat(a2AlgInput.value);
            const b2 = parseFloat(b2AlgInput.value);
            const c2 = parseFloat(c2AlgInput.value);

            if (isNaN(a1) || isNaN(b1) || isNaN(c1) || isNaN(a2) || isNaN(b2) || isNaN(c2)) {
                showMessage('Please enter valid numbers for all coefficients (a1, b1, c1, a2, b2, c2).', 'error');
                return;
            }

            const solution = solveSystem(a1, b1, c1, a2, b2, c2);

            if (solution.status === 'UNIQUE') {
                finalSolutionResult.innerHTML = `$$\\text{Solution: } x = ${solution.x.toFixed(4)}, y = ${solution.y.toFixed(4)}$$`;
            } else {
                finalSolutionResult.innerHTML = `$$\\text{System Status: } ${solution.message}$$`;
            }

            solveBySubstitution(a1, b1, c1, a2, b2, c2, solution);
            solveByElimination(a1, b1, c1, a2, b2, c2, solution);
            solveByCrossMultiplication(a1, b1, c1, a2, b2, c2, solution);

            if (window.MathJax) {
                MathJax.typeset();
            }
        }

        /**
         * Generates step-by-step solution for Substitution Method.
         */
        function solveBySubstitution(a1, b1, c1, a2, b2, c2, solution) {
            let output = '';
            const eq1 = `(1): ${formatEq(a1, b1, c1)}`;
            const eq2 = `(2): ${formatEq(a2, b2, c2)}`;
            output += `<p>Equations to solve:</p>
                       <p class="font-mono text-sm">${eq1}</p>
                       <p class="font-mono text-sm">${eq2}</p>`;

            if (solution.status !== 'UNIQUE') {
                substitutionSolution.innerHTML = output + `<p class="mt-4 font-bold text-red-700">Solution not unique: ${solution.message}</p>`;
                return;
            }

            // Step 1: Isolate a variable from one equation. Choose the easiest one (coefficient 1 or -1).
            let eqToIsolate, varToIsolate, otherVar, varCoeff, otherCoeff, constCoeff;
            let fromEqNum;
            
            // Priority: x in (2) -> y in (1) -> x in (1) -> y in (2)
            if (a2 === 1 || a2 === -1) {
                varToIsolate = 'x'; otherVar = 'y'; fromEqNum = 2;
                varCoeff = a2; otherCoeff = b2; constCoeff = c2;
            } else if (b1 === 1 || b1 === -1) {
                varToIsolate = 'y'; otherVar = 'x'; fromEqNum = 1;
                varCoeff = b1; otherCoeff = a1; constCoeff = c1;
            } else if (a1 === 1 || a1 === -1) {
                varToIsolate = 'x'; otherVar = 'y'; fromEqNum = 1;
                varCoeff = a1; otherCoeff = b1; constCoeff = c1;
            } else if (b2 === 1 || b2 === -1) {
                varToIsolate = 'y'; otherVar = 'x'; fromEqNum = 2;
                varCoeff = b2; otherCoeff = a2; constCoeff = c2;
            } else {
                // Default to x in (1)
                varToIsolate = 'x'; otherVar = 'y'; fromEqNum = 1;
                varCoeff = a1; otherCoeff = b1; constCoeff = c1;
            }

            const isolatedExpr = (varCoeff === 1) ? `${constCoeff} - ${otherCoeff}${otherVar}` : `(${constCoeff} - ${otherCoeff}${otherVar}) / ${varCoeff}`;
            
            output += `<div class="step">
                         <div class="step-title">Step 1: Isolate one variable.</div>
                         <p>Isolate **${varToIsolate}** from Equation (${fromEqNum}):</p>
                         <p class="font-mono text-sm">${varCoeff}${varToIsolate} = ${constCoeff} ${-otherCoeff > 0 ? '+' : '-'} ${Math.abs(otherCoeff)}${otherVar}</p>
                         <p class="font-mono text-sm">$$\\text{(3): } ${varToIsolate} = ${isolatedExpr.replace(/-/g, ' - ')}$$</p>
                       </div>`;

            // Step 2: Substitute the expression into the other equation.
            const targetEqNum = fromEqNum === 1 ? 2 : 1;
            const targetA = targetEqNum === 1 ? a1 : a2;
            const targetB = targetEqNum === 1 ? b1 : b2;
            const targetC = targetEqNum === 1 ? c1 : c2;

            let subEqStr;
            if (varToIsolate === 'x') {
                subEqStr = `${targetA}(${isolatedExpr}) + ${targetB}y = ${targetC}`;
            } else {
                subEqStr = `${targetA}x + ${targetB}(${isolatedExpr}) = ${targetC}`;
            }

            output += `<div class="step">
                         <div class="step-title">Step 2: Substitute the expression (3) into Equation (${targetEqNum}).</div>
                         <p>Substitute **${varToIsolate}** into Equation (${targetEqNum}):</p>
                         <p class="font-mono text-sm">$$${subEqStr.replace(/\s/g, '').replace(/\+/g, ' + ').replace(/-/g, ' - ').replace(/\*\//g, '/')}$$</p>
                       </div>`;
            
            // Step 3: Solve the resulting single-variable equation.
            const finalVar = otherVar;
            const finalVal = finalVar === 'x' ? solution.x : solution.y;
            output += `<div class="step">
                         <div class="step-title">Step 3: Solve for ${finalVar}.</div>
                         <p>Simplify and solve the resulting equation for **${finalVar}** to get:</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{${finalVar} = ${finalVal.toFixed(4)}}$$</p>
                       </div>`;

            // Step 4: Substitute back to find the other variable.
            const finalOtherVar = varToIsolate;
            const finalOtherVal = finalOtherVar === 'x' ? solution.x : solution.y;
            output += `<div class="step">
                         <div class="step-title">Step 4: Substitute back to find ${finalOtherVar}.</div>
                         <p>Substitute the value of **${finalVar}** back into Equation (3):</p>
                         <p class="font-mono text-sm">${finalOtherVar} = ${isolatedExpr.replace(otherVar, finalVal.toFixed(4))}</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{${finalOtherVar} = ${finalOtherVal.toFixed(4)}}$$</p>
                       </div>`;

            output += `<p class="mt-4 font-bold text-lg text-indigo-800">Final Solution: $x = ${solution.x.toFixed(4)}, y = ${solution.y.toFixed(4)}$</p>`;
            substitutionSolution.innerHTML = output;
        }

        /**
         * Generates step-by-step solution for Elimination Method.
         */
        function solveByElimination(a1, b1, c1, a2, b2, c2, solution) {
            let output = '';
            const eq1 = `(1): ${formatEq(a1, b1, c1)}`;
            const eq2 = `(2): ${formatEq(a2, b2, c2)}`;
            output += `<p>Equations to solve:</p>
                       <p class="font-mono text-sm">${eq1}</p>
                       <p class="font-mono text-sm">${eq2}</p>`;

            if (solution.status !== 'UNIQUE') {
                eliminationSolution.innerHTML = output + `<p class="mt-4 font-bold text-red-700">Solution not unique: ${solution.message}</p>`;
                return;
            }

            // Step 1: Choose a variable to eliminate and multiply equations to match coefficients.
            const gcd = (a, b) => {
                a = Math.abs(a); b = Math.abs(b);
                while (b) { [a, b] = [b, a % b]; }
                return a;
            };

            const targetA = Math.abs(a1) * Math.abs(a2) / gcd(a1, a2);
            const targetB = Math.abs(b1) * Math.abs(b2) / gcd(b1, b2);

            let mult1, mult2, varToElim;
            if (targetA <= targetB) {
                varToElim = 'x';
                mult1 = targetA / Math.abs(a1);
                mult2 = targetA / Math.abs(a2);
            } else {
                varToElim = 'y';
                mult1 = targetB / Math.abs(b1);
                mult2 = targetB / Math.abs(b2);
            }
            
            const newA1 = a1 * mult1; const newB1 = b1 * mult1; const newC1 = c1 * mult1;
            const newA2 = a2 * mult2; const newB2 = b2 * mult2; const newC2 = c2 * mult2;

            const newEq1 = `(3): ${formatEq(newA1, newB1, newC1)}`;
            const newEq2 = `(4): ${formatEq(newA2, newB2, newC2)}`;

            output += `<div class="step">
                         <div class="step-title">Step 1: Make coefficients of ${varToElim} equal.</div>
                         <p>Multiply Eq (1) by ${mult1} and Eq (2) by ${mult2}:</p>
                         <p class="font-mono text-sm">${newEq1}</p>
                         <p class="font-mono text-sm">${newEq2}</p>
                       </div>`;

            // Step 2: Add or subtract the equations.
            const combineOp = (newA1 / newA2 > 0) ? 'Subtract (4) from (3)' : 'Add (3) and (4)';
            const finalVar = varToElim === 'x' ? 'y' : 'x';
            
            const finalVarCoeff = (newA1 / newA2 > 0) ? (newB1 - newB2) : (newB1 + newB2);
            const finalConst = (newA1 / newA2 > 0) ? (newC1 - newC2) : (newC1 + newC2);

            output += `<div class="step">
                         <div class="step-title">Step 2: Eliminate ${varToElim}.</div>
                         <p>${combineOp} to eliminate **${varToElim}** and solve for **${finalVar}**:</p>
                         <p class="font-mono text-sm">${finalVarCoeff}${finalVar} = ${finalConst}</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{${finalVar} = ${(finalVar === 'x' ? solution.x : solution.y).toFixed(4)}}$$</p>
                       </div>`;
            
            // Step 3: Substitute back to find the other variable.
            const finalOtherVar = finalVar === 'x' ? 'y' : 'x';
            const finalOtherVal = finalOtherVar === 'x' ? solution.x : solution.y;
            const finalVal = finalVar === 'x' ? solution.x : solution.y;

            output += `<div class="step">
                         <div class="step-title">Step 3: Substitute back to find ${finalOtherVar}.</div>
                         <p>Substitute the value of **${finalVar} = ${finalVal.toFixed(4)}** back into original Equation (1):</p>
                         <p class="font-mono text-sm">${a1}${finalOtherVar} + ${b1}(${finalVal.toFixed(4)}) = ${c1}</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{${finalOtherVar} = ${finalOtherVal.toFixed(4)}}$$</p>
                       </div>`;
            
            output += `<p class="mt-4 font-bold text-lg text-red-800">Final Solution: $x = ${solution.x.toFixed(4)}, y = ${solution.y.toFixed(4)}$</p>`;
            eliminationSolution.innerHTML = output;
        }

        /**
         * Generates step-by-step solution for Cross-Multiplication Method.
         */
        function solveByCrossMultiplication(a1, b1, c1, a2, b2, c2, solution) {
            let output = '';
            const eq1 = `(1): ${formatEq(a1, b1, c1)}`;
            const eq2 = `(2): ${formatEq(a2, b2, c2)}`;
            output += `<p>Equations to solve (first, rewrite in standard form $a_ix + b_iy + c'_i = 0$):</p>
                       <p class="font-mono text-sm">$$\\text{(1): } ${a1}x + ${b1}y + ${-c1} = 0$$</p>
                       <p class="font-mono text-sm">$$\\text{(2): } ${a2}x + ${b2}y + ${-c2} = 0$$</p>`;

            if (solution.status !== 'UNIQUE') {
                crossMultiplicationSolution.innerHTML = output + `<p class="mt-4 font-bold text-red-700">Solution not unique: ${solution.message}</p>`;
                return;
            }

            // Coefficients for the method are a1, b1, -c1, a2, b2, -c2
            const c1Prime = -c1;
            const c2Prime = -c2;

            // Step 1: Write down the cross-multiplication formula.
            const formula = `$$\\frac{x}{b_1c'_2 - b_2c'_1} = \\frac{y}{c'_1a_2 - c'_2a_1} = \\frac{1}{a_1b_2 - a_2b_1}$$`;
            output += `<div class="step">
                         <div class="step-title">Step 1: State the Cross-Multiplication Formula.</div>
                         <p>The solution is found using the following relationship (where $c'$ is $-c$):</p>
                         <p class="font-mono text-sm">${formula}</p>
                       </div>`;

            // Step 2: Calculate the denominators.
            const D_x = b1 * c2Prime - b2 * c1Prime;
            const D_y = c1Prime * a2 - c2Prime * a1;
            const D_const = a1 * b2 - a2 * b1; // This is the Determinant D

            const substitution = `$$\\frac{x}{(${b1})(${c2Prime}) - (${b2})(${c1Prime})} = \\frac{y}{(${c1Prime})(${a2}) - (${c2Prime})(${a1})} = \\frac{1}{(${a1})(${b2}) - (${a2})(${b1})}$$`;
            const simplified = `$$\\frac{x}{${D_x}} = \\frac{y}{${D_y}} = \\frac{1}{${D_const}}$$`;

            output += `<div class="step">
                         <div class="step-title">Step 2: Substitute and Calculate Denominators.</div>
                         <p>Substitute the coefficient values:</p>
                         <p class="font-mono text-sm">${substitution}</p>
                         <p>Simplify:</p>
                         <p class="font-mono text-sm">${simplified}</p>
                       </div>`;

            // Step 3: Solve for x and y.
            const xVal = D_x / D_const;
            const yVal = D_y / D_const;

            output += `<div class="step">
                         <div class="step-title">Step 3: Solve for x and y.</div>
                         <p>From $\\frac{x}{${D_x}} = \\frac{1}{${D_const}}$:</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{x = \\frac{${D_x}}{${D_const}} = ${xVal.toFixed(4)}}$$</p>
                         <p>From $\\frac{y}{${D_y}} = \\frac{1}{${D_const}}$:</p>
                         <p class="font-mono text-lg text-green-700">$$\\mathbf{y = \\frac{${D_y}}{${D_const}} = ${yVal.toFixed(4)}}$$</p>
                       </div>`;
            
            output += `<p class="mt-4 font-bold text-lg text-teal-800">Final Solution: $x = ${solution.x.toFixed(4)}, y = ${solution.y.toFixed(4)}$</p>`;
            crossMultiplicationSolution.innerHTML = output;
        }

        // --- Tab Switching Logic (UPDATED) ---
        function switchTab(tabId) {
            // ADDED algebraicMethodsTab and algebraicMethodsTabButton
            const tabs = [polynomialTab, linearTab, quadraticTab, rootsTab, algebraicMethodsTab]; 
            const buttons = [polynomialTabButton, linearTabButton, quadraticTabButton, rootsTabButton, algebraicMethodsTabButton]; 

            tabs.forEach(tab => {
                if (tab && tab.id === tabId) {
                    tab.classList.remove('hidden');
                } else if (tab) {
                    tab.classList.add('hidden');
                }
            });

            buttons.forEach(button => {
                const buttonId = tabId.replace('Tab', 'TabButton');
                if (button && button.id === buttonId) {
                    button.classList.remove('bg-gray-100', 'text-gray-500', 'hover:bg-gray-200');
                    button.classList.add('bg-primary-blue', 'text-white', 'shadow-lg');
                } else if (button) {
                    button.classList.remove('bg-primary-blue', 'text-white', 'shadow-lg');
                    button.classList.add('bg-gray-100', 'text-gray-500', 'hover:bg-gray-200');
                }
            });
            
            // Re-render LaTeX for the new tab content
            if (window.MathJax) {
                MathJax.typeset();
            }
        }


        // --- Other Functions (Kept for context, but truncated for brevity) ---
        // The original file's other functions like analyzePolynomial, updateEvaluation, 
        // solveSingleLinearEquation, solveSimultaneousEquations, solveQuadraticEquation, 
        // and all roots-related functions are assumed to be present below this line. 
        // However, they are omitted in this response to keep the code concise for the user.

        // ... [Rest of the original functions: parsePolynomial, evaluate, getDegree, etc.] ...
        
        // Initialize MathJax for LaTeX rendering
        window.onload = function() {
            // Load MathJax for LaTeX support
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
            script.async = true;
            document.head.appendChild(script);

            // Set initial tab and analysis
            setTimeout(() => {
                switchTab('polynomialTab'); // Set to Polynomial tab first
                // For demonstration, we could switch to the new tab:
                // switchTab('algebraicMethodsTab');
                // runAllAlgebraicMethods();
                
                // Run analysis on default polynomial for the initial tab
                if(typeof analyzePolynomial === 'function') {
                    analyzePolynomial();
                }
            }, 100);
        };
    </script>
</body>
</html>